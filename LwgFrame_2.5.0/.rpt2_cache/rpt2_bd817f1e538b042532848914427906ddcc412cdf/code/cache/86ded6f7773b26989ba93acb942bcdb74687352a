{
  "code": "import { Admin, DateAdmin, EventAdmin, PalyAudio } from \"./lwg\";\r\nimport UIInit from \"./Lwg_Init\";\r\nexport var Lwg_Loding;\r\n(function (Lwg_Loding) {\r\n    Lwg_Loding.list_3DScene = [];\r\n    Lwg_Loding.list_3DPrefab = [];\r\n    Lwg_Loding.list_3DMesh = [];\r\n    Lwg_Loding.lolist_3DBaseMaterial = [];\r\n    Lwg_Loding.list_3DTexture2D = [];\r\n    Lwg_Loding.list_2DPic = [];\r\n    Lwg_Loding.list_2DScene = [];\r\n    Lwg_Loding.list_2DPrefab = [];\r\n    Lwg_Loding.list_JsonData = [];\r\n    Lwg_Loding.sumProgress = 0;\r\n    Lwg_Loding.currentProgress = {\r\n        p: 0,\r\n        get value() {\r\n            return this.p;\r\n        },\r\n        set value(v) {\r\n            this.p = v;\r\n            if (this.p >= Lwg_Loding.sumProgress) {\r\n                console.log('当前进度条进度为:', Lwg_Loding.currentProgress.value / Lwg_Loding.sumProgress);\r\n                console.log('进度条停止！');\r\n                console.log('所有资源加载完成！此时所有资源可通过例如 Laya.loader.getRes(\"Data/levelsData.json\")获取');\r\n                EventAdmin.notify(Lwg_Loding.LodingType.complete);\r\n            }\r\n            else {\r\n                let number = 0;\r\n                for (let index = 0; index <= Lwg_Loding.loadOrderIndex; index++) {\r\n                    number += Lwg_Loding.loadOrder[index].length;\r\n                }\r\n                if (this.p === number) {\r\n                    Lwg_Loding.loadOrderIndex++;\r\n                }\r\n                EventAdmin.notify(Lwg_Loding.LodingType.loding);\r\n            }\r\n        },\r\n    };\r\n    let LodingType;\r\n    (function (LodingType) {\r\n        LodingType[\"complete\"] = \"complete\";\r\n        LodingType[\"loding\"] = \"loding\";\r\n        LodingType[\"progress\"] = \"progress\";\r\n    })(LodingType = Lwg_Loding.LodingType || (Lwg_Loding.LodingType = {}));\r\n    class LodingScene extends Admin.Scene {\r\n        moduleOnAwake() {\r\n            DateAdmin._loginNumber.value++;\r\n            console.log('玩家登陆的天数为：', DateAdmin._loginDate.value.length, '天');\r\n        }\r\n        moduleEventReg() {\r\n            EventAdmin.reg(LodingType.loding, this, () => { this.lodingRule(); });\r\n            EventAdmin.reg(LodingType.complete, this, () => {\r\n                let time = this.lodingComplete();\r\n                PalyAudio.playMusic();\r\n                Laya.timer.once(time, this, () => { Admin._openScene(Admin.SceneName.UIInit); });\r\n            });\r\n            EventAdmin.reg(LodingType.progress, this, (skip) => {\r\n                Lwg_Loding.currentProgress.value++;\r\n                if (Lwg_Loding.currentProgress.value < Lwg_Loding.sumProgress) {\r\n                    console.log('当前进度条进度为:', Lwg_Loding.currentProgress.value / Lwg_Loding.sumProgress);\r\n                    this.lodingPhaseComplete();\r\n                }\r\n            });\r\n        }\r\n        moduleOnEnable() {\r\n            Lwg_Loding.loadOrder = [Lwg_Loding.list_2DPic, Lwg_Loding.list_2DScene, Lwg_Loding.list_2DPrefab, Lwg_Loding.list_3DScene, Lwg_Loding.list_3DPrefab, Lwg_Loding.list_JsonData];\r\n            for (let index = 0; index < Lwg_Loding.loadOrder.length; index++) {\r\n                Lwg_Loding.sumProgress += Lwg_Loding.loadOrder[index].length;\r\n                if (Lwg_Loding.loadOrder[index].length <= 0) {\r\n                    Lwg_Loding.loadOrder.splice(index, 1);\r\n                    index--;\r\n                }\r\n            }\r\n            Lwg_Loding.loadOrderIndex = 0;\r\n            let time = this.lwgOpenAni();\r\n            if (time == null) {\r\n                time = 0;\r\n            }\r\n            Laya.timer.once(time, this, () => {\r\n                EventAdmin.notify(Lwg_Loding.LodingType.loding);\r\n            });\r\n        }\r\n        lodingRule() {\r\n            if (Lwg_Loding.loadOrder.length <= 0) {\r\n                console.log('没有加载项');\r\n                return;\r\n            }\r\n            let alreadyPro = 0;\r\n            for (let i = 0; i < Lwg_Loding.loadOrderIndex; i++) {\r\n                alreadyPro += Lwg_Loding.loadOrder[i].length;\r\n            }\r\n            let index = Lwg_Loding.currentProgress.value - alreadyPro;\r\n            switch (Lwg_Loding.loadOrder[Lwg_Loding.loadOrderIndex]) {\r\n                case Lwg_Loding.list_2DPic:\r\n                    Laya.loader.load(Lwg_Loding.list_2DPic[index], Laya.Handler.create(this, (any) => {\r\n                        if (any == null) {\r\n                            console.log('XXXXXXXXXXX2D资源' + Lwg_Loding.list_2DPic[index] + '加载失败！不会停止加载进程！', '数组下标为：', index, 'XXXXXXXXXXX');\r\n                        }\r\n                        else {\r\n                            console.log('2D图片' + Lwg_Loding.list_2DPic[index] + '加载完成！', '数组下标为：', index);\r\n                        }\r\n                        EventAdmin.notify(LodingType.progress);\r\n                    }));\r\n                    break;\r\n                case Lwg_Loding.list_2DScene:\r\n                    Laya.loader.load(Lwg_Loding.list_2DScene[index], Laya.Handler.create(this, (any) => {\r\n                        if (any == null) {\r\n                            console.log('XXXXXXXXXXX数据表' + Lwg_Loding.list_2DScene[index] + '加载失败！不会停止加载进程！', '数组下标为：', index, 'XXXXXXXXXXX');\r\n                        }\r\n                        else {\r\n                            console.log('2D场景' + Lwg_Loding.list_2DScene[index] + '加载完成！', '数组下标为：', index);\r\n                        }\r\n                        EventAdmin.notify(LodingType.progress);\r\n                    }), null, Laya.Loader.JSON);\r\n                    break;\r\n                case Lwg_Loding.list_2DPrefab:\r\n                    Laya.loader.load(Lwg_Loding.list_2DPrefab[index], Laya.Handler.create(this, (any) => {\r\n                        if (any == null) {\r\n                            console.log('XXXXXXXXXXX数据表' + Lwg_Loding.list_2DPrefab[index] + '加载失败！不会停止加载进程！', '数组下标为：', index, 'XXXXXXXXXXX');\r\n                        }\r\n                        else {\r\n                            console.log('2D预制体' + Lwg_Loding.list_2DPrefab[index] + '加载完成！', '数组下标为：', index);\r\n                        }\r\n                        EventAdmin.notify(LodingType.progress);\r\n                    }), null, Laya.Loader.JSON);\r\n                    break;\r\n                case Lwg_Loding.list_3DScene:\r\n                    Laya.Scene3D.load(Lwg_Loding.list_3DScene[index], Laya.Handler.create(this, (any) => {\r\n                        if (any == null) {\r\n                            console.log('XXXXXXXXXXX3D场景' + Lwg_Loding.list_3DScene[index] + '加载失败！不会停止加载进程！', '数组下标为：', index, 'XXXXXXXXXXX');\r\n                        }\r\n                        else {\r\n                            console.log('3D场景' + Lwg_Loding.list_3DScene[index] + '加载完成！', '数组下标为：', index);\r\n                        }\r\n                        EventAdmin.notify(LodingType.progress);\r\n                    }));\r\n                    break;\r\n                case Lwg_Loding.list_3DPrefab:\r\n                    Laya.Sprite3D.load(Lwg_Loding.list_3DPrefab[index], Laya.Handler.create(this, (any) => {\r\n                        if (any == null) {\r\n                            console.log('XXXXXXXXXXX3D预设体' + Lwg_Loding.list_3DPrefab[index] + '加载失败！不会停止加载进程！', '数组下标为：', index, 'XXXXXXXXXXX');\r\n                        }\r\n                        else {\r\n                            console.log('3D预制体' + Lwg_Loding.list_3DPrefab[index] + '加载完成！', '数组下标为：', index);\r\n                        }\r\n                        EventAdmin.notify(LodingType.progress);\r\n                    }));\r\n                    break;\r\n                case Lwg_Loding.list_JsonData:\r\n                    Laya.loader.load(Lwg_Loding.list_JsonData[index], Laya.Handler.create(this, (any) => {\r\n                        if (any == null) {\r\n                            console.log('XXXXXXXXXXX数据表' + Lwg_Loding.list_JsonData[index] + '加载失败！不会停止加载进程！', '数组下标为：', index, 'XXXXXXXXXXX');\r\n                        }\r\n                        else {\r\n                            console.log('数据表' + Lwg_Loding.list_JsonData[index] + '加载完成！', '数组下标为：', index);\r\n                        }\r\n                        EventAdmin.notify(LodingType.progress);\r\n                    }), null, Laya.Loader.JSON);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        lodingPhaseComplete() { }\r\n        lodingComplete() { return 0; }\r\n        ;\r\n    }\r\n    Lwg_Loding.LodingScene = LodingScene;\r\n})(Lwg_Loding || (Lwg_Loding = {}));\r\nexport default class UILoding extends Lwg_Loding.LodingScene {\r\n    lwgOnAwake() {\r\n        console.log(window);\r\n        Lwg_Loding.list_2DPic = [];\r\n        Lwg_Loding.list_2DScene = [\r\n            \"Scene/UIInit.json\",\r\n            \"Scene/UIStart.json\",\r\n        ];\r\n        Lwg_Loding.list_2DPrefab = [];\r\n        Lwg_Loding.list_3DScene = [];\r\n        Lwg_Loding.list_3DPrefab = [];\r\n        Lwg_Loding.list_JsonData = [];\r\n        Admin._sceneScript = {\r\n            UIInit: UIInit\r\n        };\r\n    }\r\n    lwgAdaptive() {\r\n    }\r\n    lwgOnEnable() {\r\n    }\r\n    lwgOpenAni() { return 0; }\r\n    lodingPhaseComplete() {\r\n    }\r\n    lodingComplete() {\r\n        return 200;\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/LwgFrame/Project_2.5.0/LwgFrame_2.5.0/src/script/Frame/lwg.ts",
    "D:/Game/project/LwgFrame/Project_2.5.0/LwgFrame_2.5.0/src/script/Frame/Lwg_Init.ts"
  ]
}
